{"version":3,"file":"fela-dom.js","sources":["../../../modules/utils/styleTypes.js","../../../modules/dom/DOMInterface.js","../../../modules/utils/warning.js","../../../modules/utils/isValidHTMLElement.js","../../../modules/dom/render.js","../../../modules/dom/index.js"],"sourcesContent":["/* @flow */\nexport const RULE_TYPE = 1\nexport const KEYFRAME_TYPE = 2\nexport const FONT_TYPE = 3\nexport const STATIC_TYPE = 4\nexport const CLEAR_TYPE = 5\n","/* @flow weak */\nimport { RULE_TYPE } from '../utils/styleTypes'\n\nexport default function createDOMInterface(renderer, node) {\n  return (change) => {\n    // only use insertRule in production as browser devtools might have\n    // weird behavior if used together with insertRule at runtime\n    if (\n      process.env.NODE_ENV === 'production' &&\n      change.type === RULE_TYPE &&\n      !change.media\n    ) {\n      try {\n        node.sheet.insertRule(\n          `${change.selector}{${change.declaration}}`,\n          node.sheet.cssRules.length\n        )\n      } catch (error) {\n        // TODO: MAYBE WARN IN DEV MODE\n      }\n    } else {\n      node.textContent = renderer.renderToString()\n    }\n  }\n}\n","/* @flow */\n/* eslint-disable import/no-mutable-exports */\nlet warning = () => true\n\nif (process.env.NODE_ENV !== 'production') {\n  warning = (condition: boolean, message: string): void => {\n    if (!condition) {\n      if (typeof console !== 'undefined') {\n        console.error(message); // eslint-disable-line\n      }\n    }\n  }\n}\n\nexport default warning\n","/* @flow */\nexport default function isValidHTMLElement(mountNode: Object): boolean {\n  return mountNode && mountNode.nodeType === 1\n}\n","/* @flow weak */\nimport createDOMInterface from './DOMInterface'\nimport warning from '../utils/warning'\nimport isValidHTMLElement from '../utils/isValidHTMLElement'\n\nexport default function render(renderer, mountNode) {\n  // mountNode must be a valid HTML element to be able\n  // to set mountNode.textContent later on\n  if (!isValidHTMLElement(mountNode)) {\n    throw new Error(\n      'You need to specify a valid element node (nodeType = 1) to render into.'\n    )\n  }\n\n  // warns if the DOM node either is not a valid <style> element\n  // thus the styles do not get applied as Expected\n  // or if the node already got the data-fela-stylesheet attribute applied\n  // suggesting it is already used by another Renderer\n  warning(\n    mountNode.nodeName === 'STYLE',\n    'You are using a node other than `<style>`. Your styles might not get applied correctly.'\n  )\n\n  // mark and clean the DOM node to prevent side-effects\n  mountNode.setAttribute('data-fela-stylesheet', '')\n\n  const updateNode = createDOMInterface(renderer, mountNode)\n  renderer.subscribe(updateNode)\n\n  const css = renderer.renderToString()\n\n  if (mountNode.textContent !== css) {\n    // render currently rendered styles to the DOM once\n    mountNode.textContent = css\n  }\n}\n","/* @flow weak */\nimport render from './render'\n\nexport default { render }\n"],"names":["RULE_TYPE","createDOMInterface","renderer","node","change","type","media","textContent","renderToString","warning","condition","message","console","error","isValidHTMLElement","mountNode","nodeType","render","Error","nodeName","setAttribute","updateNode","subscribe","css"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EACO,IAAMA,YAAY,CAAlB;;ECEQ,SAASC,kBAAT,CAA4BC,QAA5B,EAAsCC,IAAtC,EAA4C;AACzD,EAAA,SAAO,UAACC,MAAD,EAAY;AACjB,EAAA;AACA,EAAA;AACA,EAAA,QACE,SACAA,OAAOC,IAAP,KAAgBL,SADhB,IAEA,CAACI,OAAOE,KAHV,EAIE,EAJF,MAaO;AACLH,EAAAA,WAAKI,WAAL,GAAmBL,SAASM,cAAT,EAAnB;AACD,EAAA;AACF,EAAA,GAnBD;AAoBD,EAAA;;ECvBD;AACA,EAAA,IAAIC,UAAU;AAAA,EAAA,SAAM,IAAN;AAAA,EAAA,CAAd;;AAEA,EAAA,UAA2C;AACzCA,EAAAA,YAAU,iBAACC,SAAD,EAAqBC,OAArB,EAA+C;AACvD,EAAA,QAAI,CAACD,SAAL,EAAgB;AACd,EAAA,UAAI,OAAOE,OAAP,KAAmB,WAAvB,EAAoC;AAClCA,EAAAA,gBAAQC,KAAR,CAAcF,OAAd,EADkC;AAEnC,EAAA;AACF,EAAA;AACF,EAAA,GAND;AAOD,EAAA;;AAED,kBAAeF,OAAf;;ECbe,SAASK,kBAAT,CAA4BC,SAA5B,EAAwD;AACrE,EAAA,SAAOA,aAAaA,UAAUC,QAAV,KAAuB,CAA3C;AACD,EAAA;;ECEc,SAASC,MAAT,CAAgBf,QAAhB,EAA0Ba,SAA1B,EAAqC;AAClD,EAAA;AACA,EAAA;AACA,EAAA,MAAI,CAACD,mBAAmBC,SAAnB,CAAL,EAAoC;AAClC,EAAA,UAAM,IAAIG,KAAJ,CACJ,yEADI,CAAN;AAGD,EAAA;;AAED,EAAA;AACA,EAAA;AACA,EAAA;AACA,EAAA;AACA,EAAA,YACEH,UAAUI,QAAV,KAAuB,OADzB,EAEE,yFAFF;;AAKA,EAAA;AACAJ,EAAAA,YAAUK,YAAV,CAAuB,sBAAvB,EAA+C,EAA/C;;AAEA,EAAA,MAAMC,aAAapB,mBAAmBC,QAAnB,EAA6Ba,SAA7B,CAAnB;AACAb,EAAAA,WAASoB,SAAT,CAAmBD,UAAnB;;AAEA,EAAA,MAAME,MAAMrB,SAASM,cAAT,EAAZ;;AAEA,EAAA,MAAIO,UAAUR,WAAV,KAA0BgB,GAA9B,EAAmC;AACjC,EAAA;AACAR,EAAAA,cAAUR,WAAV,GAAwBgB,GAAxB;AACD,EAAA;AACF,EAAA;;cChCc,EAAEN,cAAF,EAAf;;;;"}